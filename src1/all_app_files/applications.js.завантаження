document.addEventListener("DOMContentLoaded",function(){var e,t=document.querySelector("#search"),s=document.querySelector("#applications"),a=document.querySelector("#applications-suggest"),n=document.querySelector("#search-progress"),o=function(e){var t=new XMLHttpRequest;t.open("GET","/ajax/search?q="+e),t.setRequestHeader("X-CSRF-TOKEN",window.csrf_token),t.addEventListener("load",function(e){var t=JSON.parse(e.target.response);s.innerHTML=t.data.html,s.appendChild(a),n.classList.remove("-active")}),n.classList.add("-active"),t.send()};t.addEventListener("keyup",function(){clearTimeout(e),e=setTimeout(function(){o(t.value)},500)});var c=document.querySelector("#form-suggest-wrapper");new Form("#form-suggest",function(e,t){var s=document.querySelector("#form-suggest-success");t&&(c.style.display="none",s.classList.add("-active"),document.querySelector(".success-state").classList.add("-active"),setTimeout(function(){r.close()},3e3),dataLayer.push({event:"setapp",eventCategory:"Global Actions",eventAction:"Suggest This App",eventLabel:"",eventValue:"",eventNonInteraction:!1}))});var r=new Modal("modal-suggest",{isOverlayClose:!0,onOpen:function(){dataLayer.push({event:"virtualPageView",page:{title:"Suggest An App",url:"/suggest-an-app"}})},onClose:function(){setTimeout(function(){var e=document.querySelector("#form-suggest-success");if(e.classList.contains("-active")){e.classList.remove("-active"),document.querySelector(".success-state").classList.remove("-active"),c.style.display="block";var t=c.querySelectorAll("input");[].forEach.call(t,function(e){"submit"!=e.type&&(e.value="")})}},400)}})});